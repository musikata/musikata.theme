@import "../utils";
@import "../settings";
@import "../foundation-icons";

.feel-the-beat{

  .tap-view{
    display: flex;

    > div {
      flex: 1 1 50%;
      align-self: stretch;
    }

    .text-container {
      order: 0;
    }

    .drum-container {
      order: 1;
    }
  }

  .instructions {
    width: 65%;
    margin-top: 2em;
    margin-bottom: 2em;
    margin-left: 10%;
    font-style: italic;

    li {
      margin: 1em;
      @include transition(all, 1s, ease-in-out);
    }

    .disabled{
      color: #bbb;
    }
  }

  .drum {
    $radius: rem-calc(150);
    $overlayRadius: $radius * .8;
    width: $radius*2;
    height: $radius*2;
    @include round-corners($radius);
    background-image: url('../img/feelTheBeat/drum.jpg');
    background-size: 100% 100%;
    position: relative;

    .overlay {
      $padding: ($radius - $overlayRadius);
      position: absolute;
      top: $padding;
      left: $padding;
      opacity: 0;
      width: $overlayRadius*2;
      height: $overlayRadius*2;
      @include round-corners($overlayRadius);
      background: $primary-color;
    }

    &.disabled {
      .overlay {
        opacity: .75;
        background: gray;
      }
    }

    &:hover {
      cursor: pointer;
      .overlay {
        opacity: .2;
      }
    }

    &.tapping{
      .overlay {
        opacity: .5;
      }
    }
  }

  .results {

    $figure_height: rem-calc(250);
    $icon_size: rem-calc(15);
    $icon_padding: rem-calc(4);
    $timeline_height: $figure_height - $icon_size - 2* $icon_padding; 

    $threshold_padding: 5%;
    $threshold_height: 100% - 2*$threshold_padding;
    $mark_width: rem-calc(8);
    $mark_height: 33%;
    $mark_padding: 2%;
    $link_top: $threshold_padding + $mark_padding + $mark_height;
    $link_height: $threshold_height - 2*$mark_height - 2*$mark_padding;

    i.pass {
      @include fi-check;
      color: $pass_color;
    }

    i.fail {
      @include fi-x;
      color: $fail_color;
    }

    .figure {

      position: relative;
      width: 100%;
      height: $figure_height;

      .result-indicators {
        position: relative;
        height: $icon_size + 2*$icon_padding;

        .result {
          $radius: $icon_size;
          position: absolute;
          font-size: $icon_size;
          width: $radius*2;
          height: $radius*2;
          @include round-corners($radius);
          text-align: center;
          margin-left: -$radius;

          i {
            display: inline-block;
            vertical-align: middle;
            line-height: 2em;
          }

          &.pass {
            i {
              @include fi-check;
              color: $pass_color;
            }
          }

          &.fail {
            i {
              @include fi-x;
              color: $fail_color;
            }
          }
        }
      }

      .timeline {
        position: relative;
        height: $timeline_height;

        > div, svg{
          position: absolute;
        }

        .threshold {
          top: $threshold_padding;
          height: $threshold_height;
          border: thin dashed #666;
        }

        .tap, .beat {
          width: $mark_width;
          margin-left: -$mark_width/2;
          height: $mark_height;
          //border: thin solid #333;
        }

        .beat {
          top: $threshold_padding + $mark_padding;
          background: #3d1c1c;
        }

        .tap {
          bottom: $mark_padding + $threshold_padding;
          &.pass {
            background: $pass_color;
          }
          &.fail {
            background: $fail_color;
          }
        }

        .link {
          top: $link_top;
          height: $link_height;
          line {
            stroke-width: 1;
            stroke: black;
            stroke-dasharray: 2,2; 
          }
        }

      }
    }

  }
}
